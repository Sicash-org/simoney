Fix the error message "Error: Keypool ran out, please call keypoolrefill first" with the following steps.

Open your wallet.

Click on "Help" -> "Debug Window". 
Click on the tab Console.

This is the console where you execute RPC commands.

Unlock your wallet with the following RPC command:

walletpassphrase yourpassword 600

Replace the text "yourpassword" with the password used to encrypt your wallet. 
The number 600 is the amount of seconds your wallet is unlocked.

Fill the keypool with the following RPC command:

keypoolrefill
